"use strict";(self.webpackChunktodos_project=self.webpackChunktodos_project||[]).push([[828],{2828:(I,l,o)=>{o.r(l),o.d(l,{AuthModule:()=>x});var d=o(6895),a=o(3321),n=o(4006),t=o(4650),c=o(1583),h=o(2623),f=o(4859),p=o(9549),g=o(4144),m=o(3546);function v(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Username is required"),t.qZA())}function A(e,i){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,v,2,0,"span",10),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.usernameField.errors.required)}}function Z(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1,"Password is' required"),t.qZA())}function F(e,i){if(1&e&&(t.TgZ(0,"div",14),t.YNc(1,Z,2,0,"span",10),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.passwordField.errors.required)}}function T(e,i){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.Oqu(r.errorMsg)}}let b=(()=>{class e{get usernameField(){return this.loginForm.get("username")}get passwordField(){return this.loginForm.get("password")}constructor(r,s,u,S){this._fb=r,this._authService=s,this._router=u,this._snackbar=S,this.errorMsg="",this.isSubmit=!1,this.verticalPosition="top"}ngOnInit(){this.loginForm=this._fb.group({username:["",n.kI.required],password:["",n.kI.required]})}onSubmit(){if(this.loginForm.markAllAsTouched(),this.loginForm.invalid)return;this.errorMsg="",this.isSubmit=!0;const{username:r}=this.loginForm.value;this._authService.findByUsername(r).subscribe(s=>{this.user=s;const{password:u}=this.loginForm.value;this.user.password!==u?(this.isSubmit=!1,this.errorMsg="Incorrect logins!",this._snackbar.open(this.errorMsg,"Ok",{verticalPosition:this.verticalPosition,duration:3e3,panelClass:["snackbar-error"]})):(this._snackbar.open("Login success","Ok",{verticalPosition:this.verticalPosition,duration:3e3,panelClass:["snackbar-success"]}),this._authService.storeUser(this.user),this.loginForm.reset(),this._router.navigate(["todos"]))})}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(n.qu),t.Y36(c.e),t.Y36(a.F0),t.Y36(h.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],decls:26,vars:5,consts:[[1,"text-center","p-1"],[1,"p-3"],[1,"p-1","mb-3",3,"formGroup","ngSubmit"],[1,"d-flex","flex-column"],["appearance","fill",1,"mb-3"],["matInput","","formControlName","username"],["appearance","fill",1,""],["matInput","","type","password","formControlName","password"],[1,"text-error","text-center"],["class","errors",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["type","submit","mat-flat-button","","color","primary",3,"disabled"],["routerLink","/register"],[1,"errors"]],template:function(r,s){1&r&&(t.TgZ(0,"mat-card")(1,"mat-card-title",0)(2,"h2"),t._uU(3,"Login"),t.qZA()(),t.TgZ(4,"mat-card-content",1)(5,"form",2),t.NdJ("ngSubmit",function(){return s.onSubmit()}),t.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"Username"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Password"),t.qZA(),t._UZ(14,"input",7),t.qZA()(),t.TgZ(15,"div",8),t.YNc(16,A,2,1,"div",9),t.YNc(17,F,2,1,"div",9),t.YNc(18,T,2,1,"p",10),t.qZA(),t.TgZ(19,"div",11)(20,"button",12),t._uU(21,"Login"),t.qZA()()(),t.TgZ(22,"p",11),t._uU(23,"No Account yet? "),t.TgZ(24,"a",13),t._uU(25,"Signup here"),t.qZA()()()()),2&r&&(t.xp6(5),t.Q6J("formGroup",s.loginForm),t.xp6(11),t.Q6J("ngIf",s.usernameField&&(s.usernameField.dirty||s.usernameField.touched)&&s.usernameField.errors),t.xp6(1),t.Q6J("ngIf",s.passwordField&&(s.passwordField.dirty||s.passwordField.touched)&&s.passwordField.errors),t.xp6(1),t.Q6J("ngIf",s.errorMsg),t.xp6(2),t.Q6J("disabled",s.isSubmit))},dependencies:[d.O5,f.lW,p.KE,p.hX,g.Nt,m.a8,m.dn,m.n5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,a.rH],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();var C=o(132);const U=[{path:"",component:b}];let x=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,C.q,n.UX,a.Bz.forChild(U),a.Bz]}),e})()}}]);