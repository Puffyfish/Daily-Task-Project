"use strict";(self.webpackChunktodos_project=self.webpackChunktodos_project||[]).push([[205],{8205:(Q,T,s)=>{s.r(T),s.d(T,{TodosModule:()=>K});var l=s(6895),C=s(3321),v=s(132),_=s(6709),F=s(4006),d=s(4004),M=s(9841),N=s(4482);const{isArray:U}=Array;function P(o){return 1===o.length&&U(o[0])?o[0]:o}var D=s(3268),J=s(9635),$=s(3269);function k(...o){const r=(0,$.jO)(o);return r?(0,J.z)(k(...o),(0,D.Z)(r)):(0,N.e)((e,n)=>{(0,M.l)([e,...P(o)])(n)})}function j(...o){return k(...o)}var c=(()=>{return(o=c||(c={})).all="all",o.active="active",o.completed="completed",c;var o})(),t=s(4650),y=s(529),Z=s(1135),b=s(8505);const A={headers:new y.WM({"Content-Type":"application/json"})};let m=(()=>{class o{constructor(e){this.http=e,this.filter$=new Z.X(c.all),this.todosSubject=new Z.X([]),this.api="https://my-json-server.typicode.com/Puffyfish/Daily-Task-Project/todos/"}addNewTodo(e){return this.http.post(this.api,e,A)}getTodos(){return this.http.get(this.api).pipe((0,b.b)(e=>{this.todosSubject.next(e)}))}archiveTodos(e){return this.http.put(`${this.api}${e.id}`,e,A)}deleteTodo(e){return this.http.delete(`${this.api}${e.id}`).pipe((0,b.b)(()=>{this.getTodos().subscribe()}),(0,d.U)(()=>e))}changeFilter(e){this.filter$.next(e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=s(3546),u=s(4859),h=s(7392),w=s(1583);let S=(()=>{class o{constructor(e){this.authService=e,this.todayNumber=Date.now();const n=JSON.parse(localStorage.getItem("userData")||"{}");this.loginUser=n.name}onLogout(){this.authService.logout()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(w.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-header"]],standalone:!0,features:[t.jDz],decls:6,vars:1,consts:[["id","header-container",1,"p-2","sides-xy"],[1,"header-greeting"],["mat-mini-fab","","aria-label","logout icon","color","accent",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.onLogout()}),t.TgZ(4,"mat-icon"),t._uU(5,"logout"),t.qZA()()()),2&e&&(t.xp6(2),t.hij("Hello, ",n.loginUser,"!"))},dependencies:[u.ot,u.nh,h.Ps,h.Hw],styles:["#header-container[_ngcontent-%COMP%]{background-color:#c2185b;border-radius:1.5rem 1.5rem 0 0}.header-greeting[_ngcontent-%COMP%]{font-weight:500;font-size:1.2rem}p[_ngcontent-%COMP%]{margin:0;font-size:1rem}"]}),o})(),x=(()=>{class o{constructor(e){this.todosService=e,this.toDelete=new t.vpe,this.toComplete=new t.vpe}onClick(e){e.isCompleted=!e.isCompleted,this.toComplete.emit(e)}onDelete(e){console.log("delete button clicked:",e),this.toDelete.emit(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-task-item"]],inputs:{todoProps:["todo","todoProps"]},outputs:{toDelete:"toDelete",toComplete:"toComplete"},decls:8,vars:1,consts:[[1,"sides-xy"],[3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div")(4,"mat-icon",1),t.NdJ("click",function(){return n.onClick(n.todoProps)}),t._uU(5,"check"),t.qZA(),t.TgZ(6,"mat-icon",1),t.NdJ("click",function(){return n.onDelete(n.todoProps)}),t._uU(7,"delete"),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(n.todoProps.text))},dependencies:[h.Hw],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer}mat-icon[_ngcontent-%COMP%]:hover, mat-icon[_ngcontent-%COMP%]:active{color:#9e0459}"],changeDetection:0}),o})();var O=s(9549),L=s(4144);let H=(()=>{class o{constructor(){this.text="",this.onAddTask=new t.vpe}changeText(e){this.text=e.target.value}addTodo(){const e={id:Math.random().toString(8),text:this.text,isCompleted:!1};this.onAddTask.emit(e),this.text=""}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-todos-new"]],outputs:{onAddTask:"onAddTask"},decls:4,vars:1,consts:[[1,""],["matInput","","autofocus","",3,"value","keyup","keyup.enter"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-form-field",0)(1,"mat-label"),t._uU(2,"Add new task!"),t.qZA(),t.TgZ(3,"input",1),t.NdJ("keyup",function(a){return n.changeText(a)})("keyup.enter",function(){return n.addTodo()}),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("value",n.text))},dependencies:[O.KE,O.hX,L.Nt],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),o})();const I=function(o){return{hidden:o}},f=function(o){return{selected:o}};let z=(()=>{class o{constructor(e){this.todosService=e,this.filterEnum=c,this.noTodosClass$=this.todosService.getTodos().pipe((0,d.U)(n=>0===n.length)),this.filter$=this.todosService.filter$}changeFilter(e,n){this.todosService.changeFilter(n)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-filter"]],decls:12,vars:20,consts:[[3,"ngClass"],[1,"center-xy"],["mat-raised-button","","color","primary",3,"ngClass","click"],["mat-raised-button","","color","primary",1,"ml-1",3,"ngClass","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.ALo(1,"async"),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(a){return n.changeFilter(a,n.filterEnum.all)}),t.ALo(4,"async"),t._uU(5," All"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(a){return n.changeFilter(a,n.filterEnum.active)}),t.ALo(7,"async"),t._uU(8," Active"),t.qZA(),t.TgZ(9,"button",3),t.NdJ("click",function(a){return n.changeFilter(a,n.filterEnum.completed)}),t.ALo(10,"async"),t._uU(11," Completed"),t.qZA()()()),2&e&&(t.Q6J("ngClass",t.VKq(12,I,t.lcZ(1,4,n.noTodosClass$))),t.xp6(3),t.Q6J("ngClass",t.VKq(14,f,t.lcZ(4,6,n.filter$)===n.filterEnum.all)),t.xp6(3),t.Q6J("ngClass",t.VKq(16,f,t.lcZ(7,8,n.filter$)===n.filterEnum.active)),t.xp6(3),t.Q6J("ngClass",t.VKq(18,f,t.lcZ(10,10,n.filter$)===n.filterEnum.completed)))},dependencies:[l.mk,u.lW,l.Ov],styles:["button.selected[_ngcontent-%COMP%]{background-color:#311b92;color:#fff}"]}),o})();function E(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-task-item",7),t.NdJ("toDelete",function(){const a=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.onDelete(a))})("toComplete",function(){const a=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.onComplete(a))}),t.qZA()}2&o&&t.Q6J("todo",r.$implicit)}const X=[{path:"",component:(()=>{class o{constructor(e){this.todosService=e,this.todayNumber=Date.now(),this.tasks=[],this.todosService.todosSubject.subscribe(n=>{this.totalTasks=n.length}),this.todosService.todosSubject.pipe((0,d.U)(n=>n.filter(i=>i.isCompleted).length)).subscribe(n=>this.completedTasks=n)}ngOnInit(){this.subscription=this.todosService.getTodos().pipe(j(this.todosService.filter$),(0,d.U)(([e,n])=>n===c.active?e.filter(i=>!i.isCompleted):n===c.completed?e.filter(i=>i.isCompleted):e)).subscribe(e=>{this.tasks=e})}addTask(e){this.todosService.addNewTodo(e).subscribe(n=>this.tasks.push(n))}onDelete(e){this.todosService.deleteTodo(e).subscribe({next:n=>{alert("Successfully deleted "+e.text)},error:n=>{alert(n)}})}onComplete(e){this.todosService.archiveTodos(e).subscribe({next:n=>{alert("You have completed this task:"+e.text)},error:n=>{console.log(n)}})}ngOnDestroy(){this.subscription.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-todos"]],decls:18,vars:6,consts:[[1,"todos-container"],[3,"onAddTask"],[1,"task-header","mb-1"],[1,"tasks","mb-1"],[1,"mb-1"],[1,"mb-2"],[3,"todo","toDelete","toComplete",4,"ngFor","ngForOf"],[3,"todo","toDelete","toComplete"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"app-header"),t.TgZ(2,"app-todos-new",1),t.NdJ("onAddTask",function(a){return n.addTask(a)}),t.qZA(),t.TgZ(3,"mat-card",2)(4,"mat-card-content")(5,"p"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"h4"),t._uU(9),t.qZA()()(),t.TgZ(10,"mat-card",3)(11,"mat-card-header",4)(12,"h4"),t._uU(13,"Tasks for today:"),t.qZA()(),t.TgZ(14,"mat-card-content",5),t.YNc(15,E,1,1,"app-task-item",6),t.qZA(),t.TgZ(16,"mat-card-actions"),t._UZ(17,"app-filter"),t.qZA()()()),2&e&&(t.xp6(6),t.Oqu(t.lcZ(7,4,n.todayNumber)),t.xp6(3),t.AsE("",n.completedTasks,"/",n.totalTasks," Tasks Completed"),t.xp6(6),t.Q6J("ngForOf",n.tasks))},dependencies:[l.sg,p.a8,p.hq,p.dn,p.dk,S,x,H,z,l.uU],styles:[".todos-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;margin:0}.task-header[_ngcontent-%COMP%]{background-color:#311b92;color:#fff;margin-bottom:2rem}.tasks[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#000}mat-card-header[_ngcontent-%COMP%]{background-color:#c2185b;color:#fff}p[_ngcontent-%COMP%]{font-size:.9rem}mat-icon[_ngcontent-%COMP%]{font-weight:700}mat-card-actions[_ngcontent-%COMP%]{justify-content:center}"]}),o})()}];let K=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[l.uU],imports:[l.ez,v.q,F.UX,_.p9,S,C.Bz.forChild(X),v.q,C.Bz]}),o})()}}]);